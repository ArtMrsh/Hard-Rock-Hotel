"use strict";function slideRight(){var e=document.querySelector(".string");(left-=100)<=-400&&(left=0),e.style.left=left+"%"}function slideLeft(){var e=document.querySelector(".string");(left+=100)>0&&(left=-300),e.style.left=left+"%"}function popupClosing(){document.querySelectorAll(".popup-close").forEach(function(e){return e.addEventListener("click",function(e){"login"===e.target.parentNode.dataset.form?loginPopup.classList.remove("active"):popupForm.classList.remove("popup-active")})})}function showRooms(e){return'\n         <div class="room" data-booked="'+e.booked+'">\n            <img class="room__image" src="./img/'+e.image+'" alt="room" />\n            <div class="room__params">\n               <div class="room__params-row">\n                  <p class="room__name">'+e.name+'</p>\n               </div>\n               <div class="room__params-row">\n                  <div class="room__params-left">\n                     <p>Кількість номерів: </p>\n                  </div>\n                  <div class="room__params-right">\n                     <p>'+e.quantity+'</p>\n                  </div>\n               </div>\n               <div class="room__params-row">\n                  <div class="room__params-left">\n                     <img class="params__icon" src="img/square.png" alt="square" />\n                  </div>\n                  <div class="room__params-right">\n                     <p>'+e.square+' м2</p>\n                  </div>\n               </div>\n               <div class="room__params-row">\n                  <div class="room__params-left">\n                     <img class="params__icon" src="img/bed.png" alt="bed" />\n                  </div>\n                  <div class="room__params-right">\n                     '+e.beds+'\n                  </div>\n               </div>\n               <div class="room__description-wrap">\n                  <p class="room__description-title">У номері:</p>\n                  <p class="room__description">'+e.description+'</p>\n               </div>\n               <div class="room__params-row">\n                  <div class="room__params-left">\n                     <p>Ціна за ніч: </p>\n                  </div>\n                  <div class="room__params-right">\n                     <p>'+e.price+' грн</p>\n                  </div>\n               </div>\n            </div>\n            <button class="room__book" data-type="'+e.name+'" data-price="'+e.price+'">Забронювати</button>\n         </div>\n      '}function parseRooms(e){var t=lastPathSegment;"rooms.html"!==t&&(e=e.filter(function(e){return e.type===""+t.substr(0,t.length-5)})),document.querySelector(".rooms").innerHTML=""+e.map(showRooms).join("");document.querySelectorAll(".room__book").forEach(function(e){return e.addEventListener("click",function(e){popupForm.classList.add("popup-active");var t=document.querySelector(".selected-room");t.innerHTML=e.target.dataset.type;var r=$(".arrive-picker"),o=r.pickadate({format:"yyyy / mm / dd"});from_picker=o.pickadate("picker");var n=$(".departure-picker"),s=n.pickadate({format:"yyyy / mm / dd"}).pickadate("picker");from_picker.get("value")&&s.set("min",from_picker.get("select")),s.get("value")&&from_picker.set("max",s.get("select")),from_picker.on("set",function(e){e.select?s.set("min",from_picker.get("select")):"clear"in e&&s.set("min",!1)});var a=void 0;s.on("set",function(t){t.select?from_picker.set("max",s.get("select")):"clear"in t&&from_picker.set("max",!1);var o=new Date(""+r.val()),i=new Date(""+n.val());if(a=Math.round(Math.abs((o.getTime()-i.getTime())/864e5)),!isNaN(a)){var c=document.querySelector(".final-price");r.val()===n.val()?c.innerHTML=e.target.dataset.price+" грн":c.innerHTML=e.target.dataset.price*a+" грн"}});document.querySelector(".rooms-booking").addEventListener("submit",function(e){e.preventDefault();var o=document.querySelector(".adult-count");o=o.options[o.selectedIndex].value;var s=document.querySelector(".children-count");s=s.options[s.selectedIndex].value;var i={"Номер":t.innerHTML,"Дата заїзду":r.val(),"Дата виїзду":n.val(),"Днів проживання":a,"Кількість дорослих":o,"Кількість дітей":s,"Сформована ціна":document.querySelector(".final-price").innerHTML},c=JSON.stringify(i);localStorage.setItem("Заброньовано:",c),popupForm.classList.remove("popup-active")}),popupClosing()})})}function sortRooms(e){"sort-count"===e.target.id&&roomsArray.sort(function(e,t){return e.quantity-t.quantity}),"sort-price"===e.target.id&&roomsArray.sort(function(e,t){return e.price-t.price}),"sort-square"==e.target.id&&roomsArray.sort(function(e,t){return e.square-t.square}),"sort-name"===e.target.id&&roomsArray.sort(function(e,t){return e.name>t.name}),parseRooms(roomsArray)}function search(e,t){e=e.toLowerCase();for(var r=[],o=0;o<t.length;o++)for(var n in t[o])String(t[o][n]).toLowerCase()===e&&r.push(t[o]);return r}$(document).ready(function(){$(".conferenceroom__slider").slick({slidesToShow:1,autoplay:!0,arrows:!1,dots:!0,infiniteLoop:!0}),$(".restaurant__slider").slick({slidesToShow:1,autoplay:!0,arrows:!1,dots:!0,infiniteLoop:!0}),$(".restaurant__slider-nav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".restaurant__slider",dots:!0,centerMode:!0,focusOnSelect:!0})});var slideLeftBtn=document.querySelector(".slider-left"),slideRightBtn=document.querySelector(".slider-right"),left=0,right=0;slideLeftBtn&&(slideLeftBtn.addEventListener("click",slideLeft),setInterval(slideRight,1e4)),slideRightBtn&&slideRightBtn.addEventListener("click",slideRight);var searchBtn=document.querySelector(".search-submit");searchBtn.addEventListener("click",function(e){e.preventDefault()});var loginFormBtn=document.querySelector(".login"),loginPopup=document.querySelector(".login-popup");loginFormBtn.addEventListener("click",function(e){e.preventDefault(),loginPopup.classList.add("active"),loginPopup.innerHTML='\n   <form class="popup-form active" action="" id="login">\n      <div data-form="login" class="popup-close"><i class="fas fa-times"></i></div>\n      <input class="form-field login__name" type="text" placeholder="Введіть ім\'я">\n      <input class="form-field login__password" type="password" placeholder="Введіть пароль">\n      <button class="submit-button submit__login">login</button>\n      <p class="login__text">Не маєте аккаунта? <a class="login__redirect" href="#">Зареєструватись</a></p>\n   </form>\n   <form class="popup-form" action="" id="registration">\n      <div data-form="login" class="popup-close"><i class="fas fa-times"></i></div>\n      <input class="form-field registration__name" type="text" placeholder="Введіть ім\'я">\n      <input class="form-field registration__password" type="password" placeholder="Введіть пароль">\n      <input class="form-field registration__email" type="email" placeholder="Введіть email">\n      <button class="submit-button submit__registration">Зареєструватись</button>\n      <p class="login__text">Уже зареєстровані? <a class="login__redirect" href="#">Увійти</a></p>\n   </form>\n   ',popupClosing();document.querySelectorAll(".login__redirect").forEach(function(e){return e.addEventListener("click",function(e){e.preventDefault(),document.querySelector("#login").classList.toggle("active"),document.querySelector("#registration").classList.toggle("active")})})});var popupForm=document.querySelector(".popup"),href=document.location.href,lastPathSegment=href.substr(href.lastIndexOf("/")+1),roomsArray=[],endpoint="http://localhost:3030/api/hotels",promise=fetch(endpoint).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(e){e.forEach(function(e){roomsArray.push(e)}),parseRooms(roomsArray)}).catch(function(e){console.log(e)}),sortRadios=document.querySelectorAll(".sort-radio");sortRadios.forEach(function(e){return e.addEventListener("change",sortRooms)});var searchRoomsBtn=document.querySelector(".room-search");searchRoomsBtn&&searchRoomsBtn.addEventListener("keyup",function(e){var t=search(e.target.value,roomsArray);0!==t.length?parseRooms(t):parseRooms(roomsArray)});var galleryItems=document.querySelectorAll(".gallery-item");galleryItems.forEach(function(e){e.style.backgroundImage="url(img/"+e.dataset.img+")",e.addEventListener("click",function(e){var t=document.querySelector(".gallery__popup"),r=document.querySelector(".popup__img");t.classList.add("active"),r.style.backgroundImage="url(img/"+e.target.dataset.img+")",document.querySelector(".gallery__popup-close").addEventListener("click",function(){t.classList.remove("active")})})});